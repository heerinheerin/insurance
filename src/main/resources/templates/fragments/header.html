<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<header th:fragment="header">

    <head>
        <meta name="_csrf" th:content="${_csrf.token}" />
        <meta name="_csrf_header" th:content="${_csrf.headerName}" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

        <style>
            @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap');

            body {
                font-family: "Noto Sans KR", sans-serif;
                overflow: auto;
                position: relative;
                padding-top: 0;
                box-sizing: border-box;
            }

            .header {
                z-index: 10;
                background-color: rgb(255 255 255 / 70%);
                backdrop-filter: blur(10px);
                box-shadow: 0 1px 30px rgba(240, 237, 233, 0.596);
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                height: 180px;
                border-bottom: 1px solid #eeeeee;
                font-weight: bold;
                flex-direction: column; /* 수직 배치 */
                align-items: center;
            }

            /* ======================== 로고 애니메이션 ======================== */
            @keyframes sparkle {
                0%, 100% {
                    opacity: 1; /* 처음과 끝에서 완전 불투명 */
                }
                50% {
                    opacity: 0.5; /* 중간에서 반투명 */
                }
            }

            .logo1, .logo2, .logo3, .logo4 {
                position: fixed;
            }

            .logo1 {
                z-index: 100000;
                margin-top: 45px;
                margin-left: 350px;
                animation: slide-up 0.5s ease forwards; /* 애니메이션 적용 */
            }

            .logo2 {
                z-index: 100000;
                margin-top: 45px;
                margin-left: 355px;
                animation: slide-up 0.9s ease forwards; /* 애니메이션 적용 */
            }

            .logo3 {
                z-index: 9999;
                margin-top: 39px;
                margin-left: 338px;
                animation: sparkle 1.5s ease-in-out forwards; /* 애니메이션 적용 후 상태 유지 */
                animation-iteration-count: 2; /* 애니메이션 반복 횟수 */
            }

            .logo4 {
                z-index: 100000;
                margin-top: 42px;
                margin-left: 350px;
                animation: sparkle 1.5s ease-in-out forwards; /* 애니메이션 적용 후 상태 유지 */
                animation-iteration-count: 2; /* 애니메이션 반복 횟수 */
            }

            @keyframes slide-up {
                0% {
                    transform: translateY(50px); /* 시작 위치: 아래 */
                    opacity: 0; /* 투명도: 0 */
                }
                100% {
                    transform: translateY(0); /* 최종 위치: 원래 위치 */
                    opacity: 1; /* 투명도: 1 */
                }
            }

            .dropdown {
                z-index: 100000;
                position: fixed;
                display: flex;
                margin-top: 68px;
                margin-left: 1450px;
            }

            .nav {
                z-index: 100000;
                position: fixed;
                display: flex;
                margin-left: 1550px;
                margin-top:60px;
            }

            .bb {
                z-index: 100000;
                position: fixed;
                display: flex;
                margin-top: 140px;
                margin-left: 500px;
            }

            li {
                z-index: 100000;
                list-style-type: none;
            }

            .nav7 {
             margin-left: 10px;
                z-index: 100000;
                display: flex;
            }
            svg{
            margin-left: 40px;
            margin-top:-2px;
            }

            .dropdown-menu {
            text-align:center;
                display: none; /* 처음에는 숨김 */
                position: absolute; /* 드롭다운을 메뉴 아래에 위치시킴 */
                background-color: white; /* 배경색 */
                border: 1px solid #eeeeee; /* 테두리 */
                z-index:999; /* 다른 요소 위에 표시 */
            }
            .dropdown-menu li{
            text-align:center;
         margin-left:-800px;
            z-index: 100000;
            }

            .dropdown:hover .dropdown-menu {
            margin-top:25px;
            margin-left:-30px;
                display: block; /* 마우스를 올렸을 때 표시 */
            }
/* ============================================================ */
.dropdown2{
z-index: 100000;
                position: fixed;
                display: flex;
                margin-top: 140px;
                margin-left:370px;
                flex-direction: row; /* 수평 배치 */
    white-space: nowrap; /* 줄 바꿈 방지 */

}


  .menu_pan {
            display: none; /* 기본적으로 숨김 */
            position: absolute;
            width:3000px;
            left:-370px;
            font-size: 15px;
            top: 40px; /* 적절한 위치 */
            border-bottom: 1px solid #eeeeee;
            background-color: rgb(255 255 255 / 70%);
            box-shadow: 0 1px 30px rgba(240, 237, 233, 0.596);
            backdrop-filter: blur(10px);
            z-index: 1000; /* 다른 요소 위에 표시 */
        }


        .dropdown2:hover .menu_pan {
            display: flex; /* 드롭다운 메뉴 표시 */
        }
        .dropdown-item{
        padding-top:10px;
       margin-left:350px;
        }





            @media (max-width: 1000px) {

            .logo1, .logo2, .logo3, .logo4 {

                    z-index: 100000;
                    margin-left: 10px; /* 로고를 좀 더 왼쪽으로 이동 */
            }

                .dropdown {
                    z-index: 100000;
                    margin-left: 270px; /* 드롭다운 메뉴도 왼쪽으로 이동 */
                }
            .dropdown2{
            z-index: 100000;
            font-size:15px;
             margin-left:30px;
            }
            .nav{
              z-index: 100000;
               margin-left:370px;
            }
            .nav7, svg{
            display:none;
            }

        </style>
    </head>
    <body>
    <div class="header">
    </div>

    <a class="logo1" href="/">
        <img th:src="@{/css/images/logo1.png}" height="60">
    </a>
    <a class="logo2" href="/">
        <img th:src="@{/css/images/logo2.png}" height="60">
    </a>
    <a class="logo3" href="/">
        <img th:src="@{/css/images/logo3.png}" height="68">
    </a>
    <a class="logo4" href="/">
        <img th:src="@{/css/images/logo4.png}" height="59">
    </a>

    <div class="dropdown">
        <button class="btn btn-link dropdown-toggle nav-link px-2" type="button" aria-expanded="false">
            <a>마이페이지</a>
        </button>

        <p sec:authorize="isAuthenticated()" id="result"></p>
        <input type="hidden" id="username" sec:authorize="isAuthenticated()" th:value="${#authentication.name}">

        <div class="dropdown-menu">
            <li><a class="dropdown-item" href="/orders">이력서 관리</a></li>
            <li><a class="dropdown-item" href="/cart">관심 공고</a></li>
            <li><a class="dropdown-item" href="/userQuestion">고객센터</a></li>
            <li><a class="dropdown-item" href="/mypage">회원 정보</a></li>
        </div>
    </div>

    <ul class="nav" sec:authorize="isAnonymous()">
        <li><a href="/members/login" class="nav-link">로그인</a></li>
    </ul>

    <!-- =================================================================== -->

    <div class="dropdown2">
        <a href="/domestic" class="nav-link px-2 link-secondary">채용정보</a>
        <a href="/overseas" class="nav-link px-2 link-secondary">인재정보</a>
        <a href="/qna" class="nav-link px-2 link-secondary">커뮤니티</a>
        <a href="/event" class="nav-link px-2 link-secondary">이벤트</a>
        <a href="/api/list" class="nav-link px-2 link-secondary">공지사항</a>


        <div>
            <div class="menu_pan"> <!-- 기본적으로 숨김 -->
                <ul class="menu_pan2">
                    <li><a href="#" class="dropdown-item">지역별</a></li>
                    <li><a href="#" class="dropdown-item">직무별</a></li>
                    <li><a href="#" class="dropdown-item">TOP100</a></li>
                </ul>
            </div>
        </div>






        <!--  <div class="bb">
              <ul class="nav2">
                  <li><a href="#" class="nav-link px-2 link-secondary">채용정보</a></li>


              <ul class="nav3">
                  <li><a href="/domestic" class="nav-link px-2 link-secondary">인재정보</a></li>
              </ul>
              <ul class="nav4">
                  <li><a href="/qna" class="nav-link px-2 link-secondary">커뮤니티</a></li>
              </ul>

              <ul class="nav6">
                  <li><a href="/event" class="nav-link px-2 link-secondary">이벤트</a></li>
              </ul>

              <ul class="nav5">
                  <li><a href="#" class="nav-link px-2 link-secondary">공지사항</a></li>
              </ul> -->

        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="gray" viewBox="0 0 16 16">
            <g transform="rotate(90 8 8)"> <!-- 90도 회전, 회전 중심 (8, 8) -->
                <path d="M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8"/>
            </g>
        </svg>

        <ul class="nav7">
            <li><a href="/admin/item/new" class="nav-link px-2 link-secondary">이벤트 작성</a></li>
            <li><a href="#" class="nav-link px-2 link-secondary">공지사항 작성</a></li>
        </ul>

        <ul class="nav9" sec:authorize="isAuthenticated()">
            <a class="nav-link" href="/members/logout">로그아웃</a>
        </ul>
    </div>

    <script>
        $(document).ready(function () {
            var token = $("meta[name='_csrf']").attr("content");
            var header = $("meta[name='_csrf_header']").attr("content");
            var username = $("#username").val(); // 사용자 이름을 숨은 필드에서 가져옴

            var url = "/members/user/" + encodeURIComponent(username); // URL 경로에 사용자 이름 추가

            $.ajax({
                url: url,
                type: "GET",
                beforeSend: function (xhr) {
                    // CSRF 토큰을 헤더에 추가
                    xhr.setRequestHeader(header, token);
                },
                dataType: "json",
                cache: false,
                success: function (result, status) {
                    console.log(result); // 결과를 콘솔에 출력
                    document.getElementById('result').textContent = result.name; // 이름 출력
                }
            });

            function restartLogos() {
                // logo1과 logo2의 애니메이션을 초기화하고 다시 적용
                $('.logo1, .logo2').css('animation', 'none'); // 애니메이션 제거
                $('.logo1, .logo2').height(); // 리플로우를 트리거하여 애니메이션 초기화
                $('.logo1').css('animation', 'slide-up 0.5s ease forwards'); // 애니메이션 재적용
                $('.logo2').css('animation', 'slide-up 0.9s ease forwards'); // 애니메이션 재적용
            }

            // 초기 애니메이션 시작
            restartLogos();

            // 애니메이션 후 3초 대기 후 재시작
            setInterval(function () {
                setTimeout(restartLogos, 3000); // 3000ms: 3초 대기
            }, 3500); // 3500ms: 3초 대기 후 애니메이션 재시작
        });


        //============================드롭다운=====================================================
      // 드롭다운 메뉴가 영역을 벗어났을 때 숨기기
            $('.dropdown2').on('mouseleave', function () {
                $('.menu_pan').hide(); // 드롭다운 메뉴 숨김
            });

            // 드롭다운 메뉴에 마우스가 올라가면 보여주기
            $('.dropdown2').on('mouseenter', function () {
                $('.menu_pan').show(); // 드롭다운 메뉴 표시
            });
        });



    </script>

    </script>

    </body>
</header>
</html>
